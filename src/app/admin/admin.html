<div cjass="fluid-container" ng-controller="AdminCtrl as admin">
  <div class="row animated fadeIn margined-container">
	  <div ng-show="mode=='list'">
      <h1>Dataset</h1>
      <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr>
            <td>Judul</td>
            <td>Tanggal unggah</td>
            <td style="width:215px;">Pengunggah</td>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="data in list.data track by $index">
            <td>
              <span ng-show="data.status=='pending'" class="fa fa-spinner"></span>
              <span ng-show="data.status=='done'" class="fa fa-check-circle"></span>
              <span ng-show="data.status=='error' || data.error" class="fa fa-warning pointer" ng-click="admin.alert(data.error);"></span>
              &nbsp;
              <a href="" ng-click="admin.get(data.filename);">{{data.title}}</a>
            </td>
            <td>
                {{data.createdAt}}
            </td>
            <td class="content-centered">
                {{data.uploader}}
            </td>
          </tr>
        </tbody>
      </table>
	    <div class="content-centered centered">
	    	<pagination total-items="list.total" ng-model="list.page" ng-change="admin.paginate()" items-per-page="10"></pagination>
	    </div>
	  </div>
    <div ng-show="mode=='item'">
      <div class="row">
        <h1>Dataset : {{currentItem.title}}</h1>
        <div class="pull-left">
          <h4>Meta</h4>
        </div>
        <div class="pull-right" style="margin-bottom:15px;">
          <button class="btn btn-default" ng-click="mode='list'"><span class="fa fa-chevron-left"></span>&nbsp;Kembali</button>
          <button class="btn btn-default"><span class="fa fa-edit"></span>&nbsp;Sunting</button>
          <button class="btn btn-default" ng-click="admin.delete(currentItem.filename);"><span class="fa fa-trash"></span>&nbsp;Hapus</button>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 no-padding">
          <table class="table table-bordered table-hover" style="margin-bottom:0px !important;">
            <tbody>
              <tr>
                <td class="bg-lightgrey" style="width:150px;">Status</td>
                <td>
                  <span ng-show="currentItem.status=='pending'" class="fa fa-spinner"></span>
                  <span ng-show="currentItem.status=='done'" class="fa fa-check-circle"></span>
                  <span ng-show="currentItem.status=='error' || currentItem.error" class="fa fa-warning pointer" ng-click="admin.alert(currentItem.error);"></span>
                </td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Tanggal unggah</td>
                <td>{{currentItem.createdAt}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Sumber data</td>
                <td>{{currentItem.source}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Kontak</td>
                <td>{{currentItem.contact}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Frekuensi rilis</td>
                <td>{{currentItem.releaseFreq}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-sm-6 no-padding">
          <table class="table table-bordered table-hover" style="margin-bottom:0px !important;">
            <tbody>
              <tr>
                <td class="bg-lightgrey" style="width:150px;">Tahun</td>
                <td>{{currentItem.year}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Bulan</td>
                <td>{{currentItem.month}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Level</td>
                <td>{{currentItem.level}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Cakupan</td>
                <td>{{currentItem.scope}}</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Tag</td>
                <td>
                  - 
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-sm-6 no-padding">
          <h4>Profil Pengunggah</h4>
          <table class="table table-bordered table-hover" style="margin-bottom:0px !important;">
            <tbody>
              <tr>
                <td class="bg-lightgrey" style="width:150px;">Pengunggah</td>
                <td>Admin</td>
              </tr>
              <tr>
                <td class="bg-lightgrey">SKPD / Satuan</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-sm-6 no-padding" ng-show="currentItem.status=='done'">
          <h4>Skema</h4>
          <table class="table table-bordered table-hover" style="margin-bottom:0px !important;">
            <tbody>
              <tr>
                <td class="bg-lightgrey" style="width:150px;">Jumlah kolom</td>
                <td>
                  {{currentItem.totalColumns}}
                </td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Jumlah baris</td>
                <td>
                  {{currentItem.totalRows}}
                </td>
              </tr>
              <tr>
                <td class="bg-lightgrey">Skema</td>
                <td>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row" ng-show="currentItem.status=='done'">
        <div>
            <br>
            <h4>Tampilan Data</h4>
        </div>
        
	    	<pagination total-items="datasetList.total" ng-model="datasetList.page" ng-change="admin.datasetPaginate()" items-per-page="10"></pagination>
        <hr>
        <ul class="nav nav-tabs">
          <li role="presentation" class="active"><a href="">Tabel</a></li>
          <li role="presentation"><a href="">Grafik</a></li>
          <li role="presentation"><a href="">Peta</a></li>
        </ul>
        <div class="pull-right" style="margin-top:-35px;">
          <span ng-show="currentItem.status=='done'">
            <a target="_blank" class="alert alert-info alert-small" href="_HOST_/api/dataset/{{currentItem.filename}}?type=csv">CSV</a>
            <a target="_blank" class="alert alert-info alert-small" href="_HOST_/api/dataset/{{currentItem.filename}}?type=json">JSON</a>
            <a target="_blank" class="alert alert-info alert-small" href="_HOST_/api/dataset/{{currentItem.filename}}?type=xml">XML</a>
            <a target="_blank" class="alert alert-info alert-small" href="_HOST_/api/dataset/{{currentItem.filename}}?type=xlsx">XLSX</a>
          </span>
        </div>
        <br>
        <div id="view-table" class="recline-read-only" style="margin-bottom: 30px; height: 500px;">&nbsp;</div>
      </div>
	  </div>
  </div>
</div>

<!--ALERT-->
<script type="text/ng-template" id="alertModal.html">
<div class="modal-body" style="padding-bottom:15px">
  <div class="container-fluid row">
    <br>
    {{alertData.body}}
  </div>
  <div style="height:45px;padding-bottom:15px;margin-top:15px;" ng-show="alertData.buttons && alertData.buttons.length > 0">
    <button ng-repeat="btn in alertData.buttons" class="pull-right btn-rounded btn {{btn.class}}" ng-click="btn.func();" style="margin-left:15px;">{{btn.title}}</button>
  </div>
</div>
</script>
